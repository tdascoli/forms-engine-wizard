!function(e,t){"function"==typeof define&&define.amd?define(["jquery","knockout","Cookies"],function(e,n){return t(e,n)}):t(e.$,e.ko)}(this,function(e,t){t.extenders.cookie=function(e,n){var a,o;return"string"==typeof n?(a=n,o=!0):(a=n.name,o=n.persist),e(Cookies.set(a)),t.computed(function(){t.utils.unwrapObservable(n.persist)?Cookies.set(a,e()):Cookies.remove(a)}),t.computed({read:e,write:function(n){t.utils.unwrapObservable(o)?Cookies.set(a,n):Cookies.remove(a),null==n&&Cookies.remove(a),e(n)}})}}),$(document).ready(function(){var e=[{type:"text",name:"Kurzantwort"},{type:"textarea",name:"Absatz"},{type:"radio",name:"Multiple-Choice Frage"},{type:"checkbox",name:"KÃ¤stchen"},{type:"paragraph",name:"Text"}],t=[{type:"text",name:"Text"},{type:"number",name:"Zahl"},{type:"email",name:"E-Mail"}];var n,a=function(e,t=""){var n=this;n.element=ko.mapping.fromJSON(e.serialize()),n.type=ko.observable(e.getType()),n.idValue=function(e,t,n){return e+"-"+t+"-"+n},n.active=ko.observable(t),n.activate=function(){n.active("active")}},o=function(e=!1){var t=this;t.elements=ko.observableArray([]),elementTemplate=function(e){return"title"===(t=e.type())?"titleElement":"paragraph"===t?"paragraphElement":"textarea"===t?"textareaElement":"select"===t?"selectElement":"radio"===t||"checkbox"===t?"bulletElement":"inputElement";var t},e&&t.elements.push(new a(new Paragraph("Unbenannter Abschnitt")));var n=new Text("Frage");t.elements.push(new a(n)),t.pageNumber=function(e){return e+1},t.add=function(e,n){t.elements.push(new a(e,n))},t.addElement=function(){var e=new Text("Frage");t.add(e,"active")},t.remove=function(e){t.elements.splice(e,1)}},r=function(){var n=this;n.pages=ko.observableArray(),n.pages.push(new o),n.formTitle=new a(new Title("Form Title")),n.canSave=ko.observable(!1),n.jsonForm=ko.observable().extend({cookie:"jsonForm"}),n.addPage=function(){n.pages.push(new o(!0))},n.addElement=function(e){e=_.last(n.pages());var t=new Text("Frage");e.add(t,"active")},n.types=ko.observableArray(),$.each(e,function(e,t){n.types.push(t)}),n.typeOf=function(e){return _.find(n.types(),{type:e})},n.typeOfFormTitle="Form Titel",n.subtypes=ko.observableArray(),$.each(t,function(e,t){n.subtypes.push(t)}),n.generate=function(){var e={formTitle:n.formTitle.element,pages:new Array},t=0;_.forEach(n.pages(),function(n){e.pages[t]=new Array,_.forEach(n.elements(),function(n){e.pages[t].push(n.element)}),t++}),n.jsonForm(ko.toJSON(e)),window.open("form.php","_blank")}};n=$("script[type='text/html']").map(function(e,t){if(t.src){var n=$.Deferred();return $.get(t.src,function(e){t.text=e,-1===e.indexOf('type="text/html"')&&-1===e.indexOf("type='text/html'")||$(document.body).append(e),n.resolve()}),n.promise()}}),$.when.apply($.when,n).done(function(){ko.applyBindings(new r)})});